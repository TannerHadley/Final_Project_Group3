<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Course Schedule</title>
    <link rel="stylesheet" href="/css/indiana.css">
</head>
<body>
	<h1>Student Course Catalog</h1>
  <%- include("../partials/navbar.ejs") %>

  <div class="cart content">
    <h2>Course Schedule</h2>

		  <% if (carts.length > 0) { %>
      <% carts.forEach(cart => { %>
        <a class="single"><br>
        <h3 class="course_title" ><%= cart.course_title %></h3>
		
			<form action="/cart">
				<input type="text" value="<%= cart._id %>">
			</form>
			<a class="btn delete" data-doc="<%= cart._id %>">Delete Course</a>
			
        <br>


  


        <br>
      </form>
		
			
			
      </a>
		  
		  
      <% }) %>
    <% } else { %>



      <p>You do not have any classes you have signed up for</p>

    <% } %>

 <script>
     const trashcan = document.querySelector('a.delete');
    if (trashcan) {
        trashcan.addEventListener('click', (e) => {
            const endpoint = "/carts/" + trashcan.dataset.doc;

            fetch(endpoint, {
                method: 'DELETE'
            })
            .then((response) => response.json())
            .then((data) => window.location.href = data.redirect)
            .catch(err => console.log(err));
        });
    }

     </script>


  </div>